From 788c6027b01b2ba7c176d7d341e6288d1c68d05b Mon Sep 17 00:00:00 2001
From: meano <meano@foxmail.com>
Date: Wed, 14 Aug 2019 17:31:48 +0800
Subject: [PATCH 2/4] Add MiR3G Lite custom lite ubi mount patch

---
 ...0-ubi-auto-attach-mtd-device-named-ubi-or-data-on-boot.patch | 2 +-
 .../492-try-auto-mounting-ubi0-rootfs-in-init-do_mounts.c.patch | 2 +-
 ...0-ubi-auto-attach-mtd-device-named-ubi-or-data-on-boot.patch | 2 +-
 .../492-try-auto-mounting-ubi0-rootfs-in-init-do_mounts.c.patch | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/target/linux/generic/pending-4.14/490-ubi-auto-attach-mtd-device-named-ubi-or-data-on-boot.patch b/target/linux/generic/pending-4.14/490-ubi-auto-attach-mtd-device-named-ubi-or-data-on-boot.patch
index 992aa4662e..1c2af10a59 100644
--- a/target/linux/generic/pending-4.14/490-ubi-auto-attach-mtd-device-named-ubi-or-data-on-boot.patch
+++ b/target/linux/generic/pending-4.14/490-ubi-auto-attach-mtd-device-named-ubi-or-data-on-boot.patch
@@ -25,7 +25,7 @@ Signed-off-by: Daniel Golle <daniel@makrotopia.org>
 +	char magic[4];
 +
 +	/* try attaching mtd device named "ubi" or "data" */
-+	mtd = open_mtd_device("ubi");
++	mtd = open_mtd_device("rootfs1");
 +	if (IS_ERR(mtd))
 +		mtd = open_mtd_device("data");
 +
diff --git a/target/linux/generic/pending-4.14/492-try-auto-mounting-ubi0-rootfs-in-init-do_mounts.c.patch b/target/linux/generic/pending-4.14/492-try-auto-mounting-ubi0-rootfs-in-init-do_mounts.c.patch
index 3c82a064eb..5ae96f9474 100644
--- a/target/linux/generic/pending-4.14/492-try-auto-mounting-ubi0-rootfs-in-init-do_mounts.c.patch
+++ b/target/linux/generic/pending-4.14/492-try-auto-mounting-ubi0-rootfs-in-init-do_mounts.c.patch
@@ -20,7 +20,7 @@ Signed-off-by: Daniel Golle <daniel@makrotopia.org>
 +	int err, tried = 0;
 +
 +	while (tried < 2) {
-+		err = do_mount_root("ubi0:rootfs", "ubifs", flags, \
++		err = do_mount_root("ubi0:rootfs1", "ubifs", flags, \
 +					root_mount_data);
 +		switch (err) {
 +			case -EACCES:
diff --git a/target/linux/generic/pending-4.19/490-ubi-auto-attach-mtd-device-named-ubi-or-data-on-boot.patch b/target/linux/generic/pending-4.19/490-ubi-auto-attach-mtd-device-named-ubi-or-data-on-boot.patch
index 79d18d036f..ddd4cd6cf3 100644
--- a/target/linux/generic/pending-4.19/490-ubi-auto-attach-mtd-device-named-ubi-or-data-on-boot.patch
+++ b/target/linux/generic/pending-4.19/490-ubi-auto-attach-mtd-device-named-ubi-or-data-on-boot.patch
@@ -25,7 +25,7 @@ Signed-off-by: Daniel Golle <daniel@makrotopia.org>
 +	char magic[4];
 +
 +	/* try attaching mtd device named "ubi" or "data" */
-+	mtd = open_mtd_device("ubi");
++	mtd = open_mtd_device("rootfs");
 +	if (IS_ERR(mtd))
 +		mtd = open_mtd_device("data");
 +
diff --git a/target/linux/generic/pending-4.19/492-try-auto-mounting-ubi0-rootfs-in-init-do_mounts.c.patch b/target/linux/generic/pending-4.19/492-try-auto-mounting-ubi0-rootfs-in-init-do_mounts.c.patch
index b76e83e4a3..ffbce5066f 100644
--- a/target/linux/generic/pending-4.19/492-try-auto-mounting-ubi0-rootfs-in-init-do_mounts.c.patch
+++ b/target/linux/generic/pending-4.19/492-try-auto-mounting-ubi0-rootfs-in-init-do_mounts.c.patch
@@ -20,7 +20,7 @@ Signed-off-by: Daniel Golle <daniel@makrotopia.org>
 +	int err, tried = 0;
 +
 +	while (tried < 2) {
-+		err = do_mount_root("ubi0:rootfs", "ubifs", flags, \
++		err = do_mount_root("ubi0:rootfs1", "ubifs", flags, \
 +					root_mount_data);
 +		switch (err) {
 +			case -EACCES:
-- 
2.17.1

